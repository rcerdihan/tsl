<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Turkish Super League - Live Stats</title>

<style>
    
    body { background: rgb(186, 93, 7); color: black; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }
    h1, h2 { color: white; text-align: center; padding: 20px 0; margin: 0; text-transform: uppercase; }
    
    .menu_container { background-color: #741818; padding: 20px; text-align: center; position: sticky; top: 0; z-index: 1000; border-bottom: 3px solid gold; }
    .menu_container a { color: black; background-color: azure; text-decoration: none; padding: 10px 25px; margin: 0 10px; border-radius: 5px; font-weight: bold; }
    
    .teams_container { background-color: white; margin: 20px auto; padding: 20px; max-width: 1000px; display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; border-radius: 10px; }
    .team_card { display: flex; flex-direction: column; align-items: center; padding: 15px; border: 1px solid #eee; border-radius: 8px; }
    .team_card img { width: 60px; height: 60px; object-fit: contain; }
    .team_card p { margin-top: 10px; font-weight: bold; text-align: center; }

    .table_wrapper { background-color: white; margin: 20px auto; padding: 20px; max-width: 1000px; border-radius: 10px; overflow-x: auto; }
    
    .stats_container { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; max-width: 1000px; margin: 0 auto 40px auto; }
    .stat_box { background-color: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    .stat_box h3 { text-align: center; color: #741818; border-bottom: 2px solid gold; padding-bottom: 10px; margin-top: 0; }

    table { width: 100%; border-collapse: collapse; }
    thead { background-color: #741818; color: white; }
    th, td { padding: 12px; text-align: center; border-bottom: 1px solid #ddd; font-size: 14px; }
    .points_col { font-weight: bold; color: #741818; font-size: 1.1em; }
    
    
    .form_badge { display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin: 0 2px; }
    .win { background-color: #2ecc71; } .draw { background-color: #95a5a6; } .loss { background-color: #e74c3c; }

    @media (max-width: 768px) { 
        .teams_container { grid-template-columns: 1fr 1fr; } 
        .stats_container { grid-template-columns: 1fr; } 
    }
</style>
</head>

<body>

<div class="menu_container">
    <a href="#teams">Teams</a>
    <a href="#standings">Standings</a>
    <a href="#stats">Stats</a>
</div>

<h1>Turkish Super League</h1>

<div class="teams_container" id="teams">
    <div class="team_card"><img src="logos/fb.png" alt="FB"><p>Fenerbahçe</p></div>
    <div class="team_card"><img src="logos/gs.png" alt="GS"><p>Galatasaray</p></div>
    <div class="team_card"><img src="logos/bjk.png" alt="BJK"><p>Beşiktaş</p></div>
    <div class="team_card"><img src="logos/ts.png" alt="TS"><p>Trabzonspor</p></div>
    <div class="team_card"><img src="logos/bsk.png" alt="IBFK"><p>Başakşehir</p></div>
    <div class="team_card"><img src="logos/ant.png" alt="ANT"><p>Antalyaspor</p></div>
    <div class="team_card"><img src="logos/aln.png" alt="ALN"><p>Alanyaspor</p></div>
    <div class="team_card"><img src="logos/crs.png" alt="RIZ"><p>Rizespor</p></div>
    <div class="team_card"><img src="logos/kys.png" alt="KAY"><p>Kayserispor</p></div>
    <div class="team_card"><img src="logos/ks.png" alt="KOC"><p>Kocaelispor</p></div>
    <div class="team_card"><img src="logos/ksp.png" alt="KAS"><p>Kasımpaşa</p></div>
    <div class="team_card"><img src="logos/goz.png" alt="GOZ"><p>Göztepe</p></div>
    <div class="team_card"><img src="logos/sms.png" alt="SAM"><p>Samsunspor</p></div>
    <div class="team_card"><img src="logos/kns.png" alt="KON"><p>Konyaspor</p></div>
    <div class="team_card"><img src="logos/gfk.png" alt="GFK"><p>Gaziantep FK</p></div>
    <div class="team_card"><img src="logos/gb.png" alt="GEN"><p>Gençlerbirliği</p></div>
    <div class="team_card"><img src="logos/fkg.png" alt="FKG"><p>F. Karagümrük</p></div>
    <div class="team_card"><img src="logos/eyp.png" alt="EYP"><p>Eyüpspor</p></div>
</div>

<h2>League Standings</h2>
<div class="table_wrapper" id="standings">
    <table>
        <thead>
            <tr>
                <th>#</th>
                <th style="text-align: left;">Team</th>
                <th>MP</th>
                <th>W</th>
                <th>D</th>
                <th>L</th>
                <th>GF</th>
                <th>GA</th>
                <th>GD</th>
                <th class="points_col">Pts</th>
                <th>Form</th>
            </tr>
        </thead>
        <tbody id="standings_body">
            <tr><td colspan="11">Loading standings...</td></tr>
        </tbody>
    </table>
</div>

<h2 id="stats">Player Statistics</h2>
<div class="stats_container">
    <div class="stat_box">
        <h3>Top Scorers</h3>
        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th style="text-align: left;">Player / Team</th>
                    <th>Goals</th>
                </tr>
            </thead>
            <tbody id="scorers_body">
                <tr><td colspan="3">Loading...</td></tr>
            </tbody>
        </table>
    </div>

    <div class="stat_box">
        <h3>Top Assists</h3>
        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th style="text-align: left;">Player / Team</th>
                    <th>Assists</th>
                </tr>
            </thead>
            <tbody id="assists_body">
                <tr><td colspan="3">Loading...</td></tr>
            </tbody>
        </table>
    </div>
</div>


    
    


    
    
    

    


    
    
    

<script>
    const standingsURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRHg4fAaHacYp2mjiCm1VZeepZYsMzjxAmYexmpto9f9XMXM9HCiaFPfd0MhE8DGWlEaNCz3JDh07Xr/pub?gid=0&single=true&output=csv";
    const scorersURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRHg4fAaHacYp2mjiCm1VZeepZYsMzjxAmYexmpto9f9XMXM9HCiaFPfd0MhE8DGWlEaNCz3JDh07Xr/pub?gid=468146902&single=true&output=csv";
    const assistsURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRHg4fAaHacYp2mjiCm1VZeepZYsMzjxAmYexmpto9f9XMXM9HCiaFPfd0MhE8DGWlEaNCz3JDh07Xr/pub?gid=1186417530&single=true&output=csv";

    
    function parseCSV(text) {
        let result = [];
        let row = [];
        let inQuotes = false;
        let cell = "";
        
        for (let i = 0; i < text.length; i++) {
            let char = text[i];
            
            if (inQuotes) {
                if (char === '"') {
                    if (i + 1 < text.length && text[i + 1] === '"') {
                        cell += '"';
                        i++;
                    } else {
                        inQuotes = false;
                    }
                } else {
                    cell += char;
                }
            } else {
                if (char === '"') {
                    inQuotes = true;
                } else if (char === ',') {
                    row.push(cell);
                    cell = "";
                } else if (char === '\n') {
                    row.push(cell);
                    result.push(row);
                    row = [];
                    cell = "";
                } else if (char !== '\r') {
                    cell += char;
                }
            }
        }
        if (cell || text[text.length - 1] === ',' || text[text.length - 1] === '\n') {
             row.push(cell);
        }
        if (row.length > 0) result.push(row);
        return result;
    }

    async function fetchData(url, tbodyID, type, limit = 0) {
        try {
            const response = await fetch(url);
            if (!response.ok) throw new Error("Linke ulaşılamadı");
            
            const csvData = await response.text();
            
            
            const allRows = parseCSV(csvData);
            const rows = allRows.slice(1); 
            
            const tbody = document.getElementById(tbodyID);
            tbody.innerHTML = "";
            
            let rankCounter = 1; 
            let countLimit = 0;

            for (let i = 0; i < rows.length; i++) {
                if (limit > 0 && countLimit >= limit) break;

                const cols = rows[i];
                if (!cols || cols.length === 0) continue;
                
                let rowHTML = "";

                
                if (type === "standings") {
                     let rawName = cols[0] ? cols[0].replace(/[*"]/g, "").trim() : "";
                     if (!rawName || cols.length < 8) continue;

                     let rank = "-";
                     let teamName = rawName;
                     if (rawName.includes('.')) {
                        let parts = rawName.split('.');
                        rank = parts[0];
                        teamName = parts.slice(1).join('.').trim();
                     }

                     rowHTML += `<td>${rank}</td><td style="text-align:left; font-weight:bold;">${teamName}</td>`;
                     for(let k=1; k<9; k++) {
                        let data = cols[k] ? cols[k].replace(/[*"]/g, "").trim() : "-";
                        if(k === 8) rowHTML += `<td class="points_col">${data}</td>`;
                        else rowHTML += `<td>${data}</td>`;
                     }
                     rowHTML += `<td><span class="form_badge win"></span><span class="form_badge win"></span><span class="form_badge draw"></span><span class="form_badge win"></span><span class="form_badge loss"></span></td>`;
                     
                     const tr = document.createElement("tr");
                     tr.innerHTML = rowHTML;
                     tbody.appendChild(tr);

                } 
                
                else if (type === "scorers") {
                    let rawCol0 = cols[0] ? cols[0] : "";
                    let rawCol1 = cols[1] ? cols[1].replace(/[*"]/g, "").trim() : "0";

                    if (!rawCol0) continue;

                    let playerMatch = rawCol0.match(/\*(.*?)\*/);
                    let playerName = "";
                    let teamName = "";

                    if (playerMatch) {
                        playerName = playerMatch[1].trim(); 
                        teamName = rawCol0.replace(playerMatch[0], "").replace(/[\n\r"]/g, "").trim();
                    } else {
                        playerName = rawCol0.replace(/[\n\r"]/g, "").trim();
                    }

                    rowHTML += `<td>${rankCounter}</td>
                                <td style="text-align:left; font-weight:bold;">
                                    ${playerName} 
                                    <span style="font-size:0.85em; font-weight:normal; color:#555; margin-left:5px;">
                                        (${teamName})
                                    </span>
                                </td>
                                <td><strong>${rawCol1}</strong></td>`;
                    
                    const tr = document.createElement("tr");
                    tr.innerHTML = rowHTML;
                    tbody.appendChild(tr);
                    
                    rankCounter++;
                    countLimit++;

                } 
                
                else if (type === "assists") {
                    let playerName = cols[1] ? cols[1].replace(/[*"]/g, "").trim() : "";
                    let teamName = cols[2] ? cols[2].replace(/[*"]/g, "").trim() : "";
                    let assists = cols[4] ? cols[4].replace(/[*"]/g, "").trim() : "0";

                    if (!playerName || playerName === "Oyuncu" || assists === "") continue;

                    rowHTML += `<td>${rankCounter}</td>
                                <td style="text-align:left; font-weight:bold;">
                                    ${playerName} 
                                    <span style="font-size:0.85em; font-weight:normal; color:#555; margin-left:5px;">
                                        (${teamName})
                                    </span>
                                </td>
                                <td><strong>${assists}</strong></td>`;
                    
                    const tr = document.createElement("tr");
                    tr.innerHTML = rowHTML;
                    tbody.appendChild(tr);
                    
                    rankCounter++;
                    countLimit++;
                }
            }
        } catch (error) {
            console.error("Hata:", error);
            document.getElementById(tbodyID).innerHTML = `<tr><td colspan="100%">Veri yüklenemedi.</td></tr>`;
        }
    }

    
    fetchData(standingsURL, "standings_body", "standings", 0); 
    fetchData(scorersURL, "scorers_body", "scorers", 5);       
    fetchData(assistsURL, "assists_body", "assists", 5);       

</script>
</body>
</html>